
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Synchronization between PostgreSQL databases">
      
      
      
        <meta name="author" content="3Liz">
      
      
        <link rel="canonical" href="https://docs.3liz.org/qgis-lizsync-plugin/processing/">
      
      <link rel="icon" href="../media/icon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.6">
    
    
      
        <title>Processing - LizSync</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2c0c5eaf.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
    
    
    
      
    
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="green" data-md-color-accent="deep-orange">
      
        <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script>
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#processing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="LizSync" class="md-header__button md-logo" aria-label="LizSync" data-md-component="logo">
      
  <img src="../media/icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LizSync
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Processing
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/3liz/qgis-lizsync-plugin/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../" class="md-tabs__link">
      docs.3liz.org
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../user_guide/" class="md-tabs__link">
      User guide
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../user_guide/android/" class="md-tabs__link">
      Android
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Processing
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../references/" class="md-tabs__link">
      References
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../changelog/" class="md-tabs__link">
      Changelog
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../contributing/" class="md-tabs__link">
      Contributing
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../database/" class="md-tabs__link">
      Database
    </a>
  </li>

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="LizSync" class="md-nav__button md-logo" aria-label="LizSync" data-md-component="logo">
      
  <img src="../media/icon.png" alt="logo">

    </a>
    LizSync
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/3liz/qgis-lizsync-plugin/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        docs.3liz.org
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/" class="md-nav__link">
        User guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/android/" class="md-nav__link">
        Android
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Processing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Processing
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#03-file-synchronization" class="md-nav__link">
    03 File synchronization
  </a>
  
    <nav class="md-nav" aria-label="03 File synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-a-mobile-qgis-project" class="md-nav__link">
    Build a mobile QGIS project
  </a>
  
    <nav class="md-nav" aria-label="Build a mobile QGIS project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#send-local-qgis-projects-and-files-to-the-clone-ftp-server" class="md-nav__link">
    Send local QGIS projects and files to the clone FTP server
  </a>
  
    <nav class="md-nav" aria-label="Send local QGIS projects and files to the clone FTP server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_1" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_1" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-installation" class="md-nav__link">
    01 Installation
  </a>
  
    <nav class="md-nav" aria-label="01 Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-lizsync-tools-on-the-central-database" class="md-nav__link">
    Install Lizsync tools on the central database
  </a>
  
    <nav class="md-nav" aria-label="Install Lizsync tools on the central database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_2" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_2" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-the-central-database" class="md-nav__link">
    Prepare the central database
  </a>
  
    <nav class="md-nav" aria-label="Prepare the central database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_3" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_3" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgrade-lizsync-tools-in-the-central-database" class="md-nav__link">
    Upgrade LizSync tools in the central database
  </a>
  
    <nav class="md-nav" aria-label="Upgrade LizSync tools in the central database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_4" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_4" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04-all-in-one" class="md-nav__link">
    04 All-in-one
  </a>
  
    <nav class="md-nav" aria-label="04 All-in-one">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-project-and-data-to-a-clone" class="md-nav__link">
    Deploy project and data to a clone
  </a>
  
    <nav class="md-nav" aria-label="Deploy project and data to a clone">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_5" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_5" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#package-project-and-data-from-the-central-server" class="md-nav__link">
    Package project and data from the central server
  </a>
  
    <nav class="md-nav" aria-label="Package project and data from the central server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_6" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_6" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02-postgresql-synchronization" class="md-nav__link">
    02 PostgreSQL synchronization
  </a>
  
    <nav class="md-nav" aria-label="02 PostgreSQL synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-a-database-package-to-the-clone" class="md-nav__link">
    Deploy a database package to the clone
  </a>
  
    <nav class="md-nav" aria-label="Deploy a database package to the clone">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_7" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_7" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-package-from-the-central-database" class="md-nav__link">
    Create a package from the central database
  </a>
  
    <nav class="md-nav" aria-label="Create a package from the central database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_8" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_8" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-way-database-synchronization" class="md-nav__link">
    Two-way database synchronization
  </a>
  
    <nav class="md-nav" aria-label="Two-way database synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_9" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_9" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../references/" class="md-nav__link">
        References
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        Database
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#03-file-synchronization" class="md-nav__link">
    03 File synchronization
  </a>
  
    <nav class="md-nav" aria-label="03 File synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-a-mobile-qgis-project" class="md-nav__link">
    Build a mobile QGIS project
  </a>
  
    <nav class="md-nav" aria-label="Build a mobile QGIS project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#send-local-qgis-projects-and-files-to-the-clone-ftp-server" class="md-nav__link">
    Send local QGIS projects and files to the clone FTP server
  </a>
  
    <nav class="md-nav" aria-label="Send local QGIS projects and files to the clone FTP server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_1" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_1" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-installation" class="md-nav__link">
    01 Installation
  </a>
  
    <nav class="md-nav" aria-label="01 Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-lizsync-tools-on-the-central-database" class="md-nav__link">
    Install Lizsync tools on the central database
  </a>
  
    <nav class="md-nav" aria-label="Install Lizsync tools on the central database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_2" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_2" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-the-central-database" class="md-nav__link">
    Prepare the central database
  </a>
  
    <nav class="md-nav" aria-label="Prepare the central database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_3" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_3" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgrade-lizsync-tools-in-the-central-database" class="md-nav__link">
    Upgrade LizSync tools in the central database
  </a>
  
    <nav class="md-nav" aria-label="Upgrade LizSync tools in the central database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_4" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_4" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04-all-in-one" class="md-nav__link">
    04 All-in-one
  </a>
  
    <nav class="md-nav" aria-label="04 All-in-one">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-project-and-data-to-a-clone" class="md-nav__link">
    Deploy project and data to a clone
  </a>
  
    <nav class="md-nav" aria-label="Deploy project and data to a clone">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_5" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_5" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#package-project-and-data-from-the-central-server" class="md-nav__link">
    Package project and data from the central server
  </a>
  
    <nav class="md-nav" aria-label="Package project and data from the central server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_6" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_6" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02-postgresql-synchronization" class="md-nav__link">
    02 PostgreSQL synchronization
  </a>
  
    <nav class="md-nav" aria-label="02 PostgreSQL synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-a-database-package-to-the-clone" class="md-nav__link">
    Deploy a database package to the clone
  </a>
  
    <nav class="md-nav" aria-label="Deploy a database package to the clone">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_7" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_7" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-package-from-the-central-database" class="md-nav__link">
    Create a package from the central database
  </a>
  
    <nav class="md-nav" aria-label="Create a package from the central database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_8" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_8" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-way-database-synchronization" class="md-nav__link">
    Two-way database synchronization
  </a>
  
    <nav class="md-nav" aria-label="Two-way database synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_9" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs_9" class="md-nav__link">
    Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/3liz/qgis-lizsync-plugin/edit/master/docs/processing/README.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="processing">Processing<a class="headerlink" href="#processing" title="Permanent link">#</a></h1>
<h2 id="03-file-synchronization">03 File synchronization<a class="headerlink" href="#03-file-synchronization" title="Permanent link">#</a></h2>
<h3 id="build-a-mobile-qgis-project">Build a mobile QGIS project<a class="headerlink" href="#build-a-mobile-qgis-project" title="Permanent link">#</a></h3>
<p>This scripts builds a mobile version of the current QGIS project. It only changes the qgs file, it is not in charge to export the layers.</p>
<p>The following actions are executed:
 * search and replace the connection parameters for the PostgreSQL layers needed to be edited in the clone database
 * search and replace the datasource for the layers which are exported to Geopackage
 * save the changes in a new QGIS project file name after the current project name with the addition of the suffix _mobile. For example: YOUR_PROJECT_mobile.qgs if your project is named YOUR_PROJECT.qgs</p>
<p><img alt="algo_id" src="lizsync-build_mobile_project.png" /></p>
<h4 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
<th align="center">Required</th>
<th align="center">Advanced</th>
<th align="center">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">CONNECTION_NAME_CENTRAL</td>
<td align="center">PostgreSQL connection to the central database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the central database. Needed to be able to search &amp; replace the database connection parameters in the QGIS project to make it usable in the clone (Termux or Geopoppy).</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">PG_LAYERS</td>
<td align="center">PostgreSQL Layers to edit in the field</td>
<td align="center">MultipleLayers</td>
<td align="center">Select the PostgreSQL layers you want to edit in the clone. The connection parameters of these layers will be adapted for the clone PostgreSQL datatabase</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">GPKG_LAYERS</td>
<td align="center">Layers to convert into Geopackage</td>
<td align="center">MultipleLayers</td>
<td align="center">Select the vector layers you have exported (or you will export) to a Geopackage file  The datasource of these layers will be changed to reference the Geopackage layer instead of the initial source</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
<h4 id="outputs">Outputs<a class="headerlink" href="#outputs" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">OUTPUT_STATUS</td>
<td align="center">Output status</td>
<td align="center">Number</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OUTPUT_STRING</td>
<td align="center">Output message</td>
<td align="center">String</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="send-local-qgis-projects-and-files-to-the-clone-ftp-server">Send local QGIS projects and files to the clone FTP server<a class="headerlink" href="#send-local-qgis-projects-and-files-to-the-clone-ftp-server" title="Permanent link">#</a></h3>
<p>Send QGIS projects and files to the clone FTP server remote directory.</p>
<p>This script can be used by the geomatician in charge of the deployment of data to one or several clone(s).</p>
<p>It synchronizes the files from the given local QGIS project folder to the clone remote folder by using the given FTP connexion. This means all the files from the clone folder will be overwritten by the files from the local QGIS project folder.</p>
<p>Beware ! This script does not adapt projects for the clone database (no modification of the PostgreSQL connexion data inside the QGIS project files) !</p>
<p><img alt="algo_id" src="lizsync-send_projects_and_files_to_clone_ftp.png" /></p>
<h4 id="parameters_1">Parameters<a class="headerlink" href="#parameters_1" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
<th align="center">Required</th>
<th align="center">Advanced</th>
<th align="center">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">LOCAL_QGIS_PROJECT_FOLDER</td>
<td align="center">Local desktop QGIS project folder</td>
<td align="center">File</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">WINSCP_BINARY_PATH</td>
<td align="center">WinSCP binary path</td>
<td align="center">File</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center">Default: /root/.local/share/QGIS/QGIS3/profiles/default/python/plugins/lizsync/install/WinSCP <br></td>
</tr>
<tr>
<td align="center">CLONE_FTP_PROTOCOL</td>
<td align="center">Clone (S)FTP protocol</td>
<td align="center">Enum</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Values: SFTP, FTP <br></td>
</tr>
<tr>
<td align="center">CLONE_FTP_HOST</td>
<td align="center">Clone FTP Server host</td>
<td align="center">String</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">CLONE_FTP_PORT</td>
<td align="center">Clone FTP Server port</td>
<td align="center">Number</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: 2021 <br> Type: Integer<br> Min: -1.7976931348623157e+308, Max: 1.7976931348623157e+308 <br></td>
</tr>
<tr>
<td align="center">CLONE_FTP_LOGIN</td>
<td align="center">Clone FTP Server login</td>
<td align="center">String</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: geopoppy <br></td>
</tr>
<tr>
<td align="center">CLONE_FTP_PASSWORD</td>
<td align="center">Clone FTP Server password</td>
<td align="center">String</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">CLONE_FTP_REMOTE_DIR</td>
<td align="center">Clone FTP Server remote directory</td>
<td align="center">String</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: / <br></td>
</tr>
<tr>
<td align="center">FTP_EXCLUDE_REMOTE_SUBDIRS</td>
<td align="center">List of sub-directory to exclude from synchro, separated by commas.</td>
<td align="center">String</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">Default: data <br></td>
</tr>
</tbody>
</table>
<h4 id="outputs_1">Outputs<a class="headerlink" href="#outputs_1" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">OUTPUT_STATUS</td>
<td align="center">Output status</td>
<td align="center">Number</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OUTPUT_STRING</td>
<td align="center">Output message</td>
<td align="center">String</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="01-installation">01 Installation<a class="headerlink" href="#01-installation" title="Permanent link">#</a></h2>
<h3 id="install-lizsync-tools-on-the-central-database">Install Lizsync tools on the central database<a class="headerlink" href="#install-lizsync-tools-on-the-central-database" title="Permanent link">#</a></h3>
<p>Install the LizSync schema with tables and function on the central database.</p>
<p>This script will add
 * A lizsync schema with tables and functions</p>
<p>Beware ! If the schema lizsync already exists in the database, not installation will be made. You will need to manually correct the situation (drop or modifiy the schemas, tables and functions) with SQL commands.</p>
<p><img alt="algo_id" src="lizsync-create_database_structure.png" /></p>
<h4 id="parameters_2">Parameters<a class="headerlink" href="#parameters_2" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
<th align="center">Required</th>
<th align="center">Advanced</th>
<th align="center">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">CONNECTION_NAME</td>
<td align="center">PostgreSQL connection to the central database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the central database. You need to have the right to create a new schema in this database, as a schema lizsync will be created and filled with the needed tables and functions</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OVERRIDE_LIZSYNC</td>
<td align="center">Drop lizsync schema and all data ?</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
<h4 id="outputs_2">Outputs<a class="headerlink" href="#outputs_2" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">OUTPUT_STATUS</td>
<td align="center">Output status</td>
<td align="center">Number</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OUTPUT_STRING</td>
<td align="center">Output message</td>
<td align="center">String</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="prepare-the-central-database">Prepare the central database<a class="headerlink" href="#prepare-the-central-database" title="Permanent link">#</a></h3>
<p>Prepare the central server PostgreSQL database with the needed data for LizSync tool.</p>
<p>LizSync needs to have :
 * A server ID stored in the lizsync.server_metadata table
 * All tables from the given schema must have a unique identifier column (uid) with standard uuid inside
 * All tables from the given schema must be audited by a trigger</p>
<p>You can pass a list of PostgreSQL central database schemas and this alg will add the necessary data and tools</p>
<p><img alt="algo_id" src="lizsync-initialize_central_database.png" /></p>
<h4 id="parameters_3">Parameters<a class="headerlink" href="#parameters_3" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
<th align="center">Required</th>
<th align="center">Advanced</th>
<th align="center">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">CONNECTION_NAME_CENTRAL</td>
<td align="center">PostgreSQL connection to the central database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the central database.</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ADD_SERVER_ID</td>
<td align="center">Add server id in metadata table</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: True <br></td>
</tr>
<tr>
<td align="center">ADD_UID_COLUMNS</td>
<td align="center">Add unique identifiers in all tables</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ADD_AUDIT_TRIGGERS</td>
<td align="center">Add audit triggers in all tables</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">SCHEMAS</td>
<td align="center">Restrict to comma separated schema names. NB: schemas public &amp; lizsync are never processed</td>
<td align="center">String</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
<h4 id="outputs_3">Outputs<a class="headerlink" href="#outputs_3" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">OUTPUT_STATUS</td>
<td align="center">Output status</td>
<td align="center">Number</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OUTPUT_STRING</td>
<td align="center">Output message</td>
<td align="center">String</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="upgrade-lizsync-tools-in-the-central-database">Upgrade LizSync tools in the central database<a class="headerlink" href="#upgrade-lizsync-tools-in-the-central-database" title="Permanent link">#</a></h3>
<p>Upgrade the Lizsync tables and functions in the central database.</p>
<p>If you have upgraded your QGIS LizSync plugin, you can run this script to upgrade your central database to the new plugin version.</p>
<p><img alt="algo_id" src="lizsync-upgrade_database_structure.png" /></p>
<h4 id="parameters_4">Parameters<a class="headerlink" href="#parameters_4" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
<th align="center">Required</th>
<th align="center">Advanced</th>
<th align="center">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">CONNECTION_NAME</td>
<td align="center">PostgreSQL connection to the central database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the central database. You need to have the right to create a new schema in this database, as a schema lizsync will be created and filled with the needed tables and functions</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">RUNIT</td>
<td align="center">Check this box to upgrade. No action will be done otherwise</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
<h4 id="outputs_4">Outputs<a class="headerlink" href="#outputs_4" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">OUTPUT_STATUS</td>
<td align="center">Output status</td>
<td align="center">Number</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OUTPUT_STRING</td>
<td align="center">Output message</td>
<td align="center">String</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="04-all-in-one">04 All-in-one<a class="headerlink" href="#04-all-in-one" title="Permanent link">#</a></h2>
<h3 id="deploy-project-and-data-to-a-clone">Deploy project and data to a clone<a class="headerlink" href="#deploy-project-and-data-to-a-clone" title="Permanent link">#</a></h3>
<p>Send packaged QGIS projects, files and data to the clone</p>
<p><img alt="algo_id" src="lizsync-deploy_all.png" /></p>
<h4 id="parameters_5">Parameters<a class="headerlink" href="#parameters_5" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
<th align="center">Required</th>
<th align="center">Advanced</th>
<th align="center">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">CONNECTION_NAME_CENTRAL</td>
<td align="center">PostgreSQL connection to the central database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the central database.</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">CONNECTION_NAME_CLONE</td>
<td align="center">PostgreSQL connection to the clone database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the clone database.</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">POSTGRESQL_BINARY_PATH</td>
<td align="center">PostgreSQL binary path</td>
<td align="center">File</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center">✓</td>
<td align="center">Default: /usr/bin/ <br></td>
</tr>
<tr>
<td align="center">RECREATE_CLONE_SERVER_ID</td>
<td align="center">Recreate clone server id. Do it only to fully reset the clone ID !</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center">✓</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">WINSCP_BINARY_PATH</td>
<td align="center">WinSCP binary path</td>
<td align="center">File</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center">Default: /root/.local/share/QGIS/QGIS3/profiles/default/python/plugins/lizsync/install/WinSCP <br></td>
</tr>
<tr>
<td align="center">CLONE_FTP_PROTOCOL</td>
<td align="center">Clone (S)FTP protocol</td>
<td align="center">Enum</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Values: SFTP, FTP <br></td>
</tr>
<tr>
<td align="center">CLONE_FTP_HOST</td>
<td align="center">Clone FTP Server host</td>
<td align="center">String</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">CLONE_FTP_PORT</td>
<td align="center">Clone FTP Server port</td>
<td align="center">Number</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: 2021 <br> Type: Integer<br> Min: -1.7976931348623157e+308, Max: 1.7976931348623157e+308 <br></td>
</tr>
<tr>
<td align="center">CLONE_FTP_LOGIN</td>
<td align="center">Clone FTP Server login</td>
<td align="center">String</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: geopoppy <br></td>
</tr>
<tr>
<td align="center">CLONE_FTP_PASSWORD</td>
<td align="center">Clone FTP Server password</td>
<td align="center">String</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">CLONE_FTP_REMOTE_DIR</td>
<td align="center">Clone FTP Server remote directory</td>
<td align="center">String</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: / <br></td>
</tr>
<tr>
<td align="center">FTP_EXCLUDE_REMOTE_SUBDIRS</td>
<td align="center">List of sub-directory to exclude from synchro, separated by commas.</td>
<td align="center">String</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center">Default: data <br></td>
</tr>
</tbody>
</table>
<h4 id="outputs_5">Outputs<a class="headerlink" href="#outputs_5" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">OUTPUT_STATUS</td>
<td align="center">Output status</td>
<td align="center">Number</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OUTPUT_STRING</td>
<td align="center">Output message</td>
<td align="center">String</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="package-project-and-data-from-the-central-server">Package project and data from the central server<a class="headerlink" href="#package-project-and-data-from-the-central-server" title="Permanent link">#</a></h3>
<p>This scripts helps to prepare field work: it creates a package with PostgreSQL layers data, a Geopackage file with the other vector layers data and creates a mobile version of the current QGIS project</p>
<p><img alt="algo_id" src="lizsync-package_all.png" /></p>
<h4 id="parameters_6">Parameters<a class="headerlink" href="#parameters_6" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
<th align="center">Required</th>
<th align="center">Advanced</th>
<th align="center">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">CONNECTION_NAME_CENTRAL</td>
<td align="center">PostgreSQL connection to the central database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the central database.</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">POSTGRESQL_BINARY_PATH</td>
<td align="center">PostgreSQL binary path</td>
<td align="center">File</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center">✓</td>
<td align="center">Default: /usr/bin/ <br></td>
</tr>
<tr>
<td align="center">PG_LAYERS</td>
<td align="center">PostgreSQL Layers to edit in the field</td>
<td align="center">MultipleLayers</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ADD_UID_COLUMNS</td>
<td align="center">Add unique identifiers in all tables</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center">✓</td>
<td align="center">Default: True <br></td>
</tr>
<tr>
<td align="center">ADD_AUDIT_TRIGGERS</td>
<td align="center">Add audit triggers in all tables</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center">✓</td>
<td align="center">Default: True <br></td>
</tr>
<tr>
<td align="center">ADDITIONAL_SQL_FILE</td>
<td align="center">Additionnal SQL file to run in the clone after the ZIP deployement</td>
<td align="center">File</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">GPKG_LAYERS</td>
<td align="center">Layers to convert into Geopackage</td>
<td align="center">MultipleLayers</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OVERWRITE_GPKG</td>
<td align="center">Overwrite the Geopackage file if it exists ?</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center">✓</td>
<td align="center">Default: True <br></td>
</tr>
</tbody>
</table>
<h4 id="outputs_6">Outputs<a class="headerlink" href="#outputs_6" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">OUTPUT_STATUS</td>
<td align="center">Output status</td>
<td align="center">Number</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OUTPUT_STRING</td>
<td align="center">Output message</td>
<td align="center">String</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="02-postgresql-synchronization">02 PostgreSQL synchronization<a class="headerlink" href="#02-postgresql-synchronization" title="Permanent link">#</a></h2>
<h3 id="deploy-a-database-package-to-the-clone">Deploy a database package to the clone<a class="headerlink" href="#deploy-a-database-package-to-the-clone" title="Permanent link">#</a></h3>
<p>Deploy a ZIP archive, previously saved with the "Package central database" algorithm, to the chosen clone. This ZIP archive, named by default "central_database_package.zip" contains data from the central PostgreSQL database.</p>
<p><img alt="algo_id" src="lizsync-deploy_database_server_package.png" /></p>
<h4 id="parameters_7">Parameters<a class="headerlink" href="#parameters_7" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
<th align="center">Required</th>
<th align="center">Advanced</th>
<th align="center">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">CONNECTION_NAME_CENTRAL</td>
<td align="center">PostgreSQL connection to the central database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the central database.</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">CONNECTION_NAME_CLONE</td>
<td align="center">PostgreSQL connection to the clone database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the clone database.</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">POSTGRESQL_BINARY_PATH</td>
<td align="center">PostgreSQL binary path</td>
<td align="center">File</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: /usr/bin/ <br></td>
</tr>
<tr>
<td align="center">ZIP_FILE</td>
<td align="center">Database ZIP archive path</td>
<td align="center">File</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">Default: /tmp/central_database_package.zip <br></td>
</tr>
<tr>
<td align="center">RECREATE_CLONE_SERVER_ID</td>
<td align="center">Recreate clone server id. Do it only to fully reset the clone ID !</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
<h4 id="outputs_7">Outputs<a class="headerlink" href="#outputs_7" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">OUTPUT_STATUS</td>
<td align="center">Output status</td>
<td align="center">Number</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OUTPUT_STRING</td>
<td align="center">Output message</td>
<td align="center">String</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="create-a-package-from-the-central-database">Create a package from the central database<a class="headerlink" href="#create-a-package-from-the-central-database" title="Permanent link">#</a></h3>
<p>Package data from the central database, for future deployement on one or several clone(s).</p>
<p>This script backups all data from the given list of tables to a ZIP archive, named by default "central_database_package.zip".</p>
<p>You can add an optionnal SQL file to run in the clone after the deployment of the archive. This file must contain valid PostgreSQL queries and can be used to drop some triggers in the clone or remove some constraints. For example "DELETE FROM pg_trigger WHERE tgname = 'name_of_trigger';"</p>
<p>An internet connection is needed because a synchronization item must be written to the central database "lizsync.history" table during the process. and obviously data must be downloaded from the central database</p>
<p><img alt="algo_id" src="lizsync-package_central_database.png" /></p>
<h4 id="parameters_8">Parameters<a class="headerlink" href="#parameters_8" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
<th align="center">Required</th>
<th align="center">Advanced</th>
<th align="center">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">CONNECTION_NAME_CENTRAL</td>
<td align="center">PostgreSQL connection to the central database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the central database.</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">POSTGRESQL_BINARY_PATH</td>
<td align="center">PostgreSQL binary path</td>
<td align="center">File</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: /usr/bin/ <br></td>
</tr>
<tr>
<td align="center">PG_LAYERS</td>
<td align="center">PostgreSQL Layers to edit in the field</td>
<td align="center">MultipleLayers</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ADD_UID_COLUMNS</td>
<td align="center">Add unique identifiers in all tables</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: True <br></td>
</tr>
<tr>
<td align="center">ADD_AUDIT_TRIGGERS</td>
<td align="center">Add audit triggers in all tables</td>
<td align="center">Boolean</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: True <br></td>
</tr>
<tr>
<td align="center">ADDITIONAL_SQL_FILE</td>
<td align="center">Additionnal SQL file to run in the clone after the ZIP deployement</td>
<td align="center">File</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ZIP_FILE</td>
<td align="center">Output archive file (ZIP)</td>
<td align="center">FileDestination</td>
<td align="center"></td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center">Default: /tmp/central_database_package.zip <br></td>
</tr>
</tbody>
</table>
<h4 id="outputs_8">Outputs<a class="headerlink" href="#outputs_8" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">ZIP_FILE</td>
<td align="center">Output archive file (ZIP)</td>
<td align="center">File</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OUTPUT_STATUS</td>
<td align="center">Output status</td>
<td align="center">Number</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OUTPUT_STRING</td>
<td align="center">Output message</td>
<td align="center">String</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="two-way-database-synchronization">Two-way database synchronization<a class="headerlink" href="#two-way-database-synchronization" title="Permanent link">#</a></h3>
<p>This scripts run a two-way data synchronization between the central and clone database.</p>
<p>The data to synchronize are listed by reading the content of the "lizsync.logged_actions" of each database, since the last synchronization or the last deployement of ZIP package.</p>
<p>This audit data are transformed into INSERT/UPDATE/DELETE SQL queries which are played in the databases in this order:
 1/ From the CENTRAL to the CLONE database
 2/ From the CLONE to the CENTRAL database</p>
<p>The central database stores which clone has replayed which audited modification, and keeps an history of synchronization items.</p>
<p><img alt="algo_id" src="lizsync-synchronize_database.png" /></p>
<h4 id="parameters_9">Parameters<a class="headerlink" href="#parameters_9" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
<th align="center">Required</th>
<th align="center">Advanced</th>
<th align="center">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">CONNECTION_NAME_CENTRAL</td>
<td align="center">PostgreSQL connection to the central database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the central database.</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">CONNECTION_NAME_CLONE</td>
<td align="center">PostgreSQL connection to the clone database</td>
<td align="center">String</td>
<td align="center">The PostgreSQL connection to the clone database.</td>
<td align="center">✓</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
<h4 id="outputs_9">Outputs<a class="headerlink" href="#outputs_9" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">Description</th>
<th align="center">Type</th>
<th align="center">Info</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">OUTPUT_STATUS</td>
<td align="center">Output status</td>
<td align="center">Number</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OUTPUT_STRING</td>
<td align="center">Output message</td>
<td align="center">String</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<hr />
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../user_guide/android/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Android
            </div>
          </div>
        </a>
      
      
        <a href="../references/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              References
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <span class="copyleft">&copy;</span> 3Liz
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://twitter.com/3LIZ_news" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.linkedin.com/company/3liz" target="_blank" rel="noopener" title="www.linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://github.com/3liz/" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://hub.docker.com/u/3liz" target="_blank" rel="noopener" title="hub.docker.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.a1c7c35e.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
      
    
  </body>
</html>